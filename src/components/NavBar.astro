---
import Status from "@components/Status.astro";
import TextSizeSwitcher from "@components/TextSizeSwitcher.astro";
import ThemeSwitcher from "@components/ThemeSwitcher.astro";

const { pathname } = Astro.url;

const navConfig = [
	{
		match: (path: string) => path.startsWith("/admin"), // for admin
		links: [
			{ href: "/", label: "Home" },
			{ href: "/admin/event", label: "Organize" },
			{ href: "/admin/status", label: "Status" },
			{ href: "/admin/manage/account", label: "Account" },
		],
	},
	{
		match: () => true, // for anyone else
		links: [
			{ href: "/", label: "Home" },
			{ href: "/register", label: "Event" },
		],
	},
];

const activeNav =
	navConfig.find((section) => section.match(pathname))?.links ?? [];

---
<nav class="flex flex-row flex-wrap justify-between px-4 py-1 mb-2 mt-1 rounded-b-lg gap-2">
	<div>
		<div class="bg-secondary border-2 border-primary rounded-lg flex flex-row">
			{activeNav.map((link, index) => (
				<a
					href={link.href}
					class={`px-4 py-2 hover:underline hover-overlay whitespace-nowrap ${
						index !== activeNav.length - 1
							? "border-r-2 border-primary"
							: ""
					}`}
				>
					{link.label}
				</a>
			))}
		</div>
	</div>

	<div class="flex flex-row lg:gap-2 items-center justify-center gap-1">
		<ThemeSwitcher />
		<TextSizeSwitcher />
		{pathname.startsWith("/admin") && <Status />}
	</div>
</nav>
